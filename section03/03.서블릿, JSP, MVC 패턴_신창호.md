
# ìŠ¤í”„ë§ì˜ ê°•ì˜ ë¦¬ë·°ğŸ“½
> LoadMap Part : ìŠ¤í”„ë§ MVC íŒ¨í„´ 1í¸     
> Section :  03.ì„œë¸”ë¦¿, JSP,MVCíŒ¨í„´  
> CreateDate : 2022.07.15  
> UpdateDate : 2022.07.16  

### ëª©ì°¨
> ì„œë¸”ë¦¿ -> JSP -> MVCíŒ¨í„´ì„ ì“°ê²Œëœ ë³€ì²œê³¼ì •ì„ ë°°ìš°ëŠ” ì„¹ì…˜
- [íšŒì› ê´€ë¦¬ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ **ìš”êµ¬ì‚¬í•­**](#requirement)
- [**ì„œë¸”ë¦¿**ìœ¼ë¡œ íšŒì› ê´€ë¦¬ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë§Œë“¤ê¸°](#servlet)
- [**JSP**ë¡œ íšŒì› ê´€ë¦¬ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë§Œë“¤ê¸°](#JSP)
- **MVC íŒ¨í„´**
  - [ê°œìš”](#summary) 
  - [ì ìš©](#Application)
  - [í•œê³„](#Limit) 
<br></br>
### IntelliJ ë‹¨ì¶•í‚¤
- `ctrl`+ `shift` + `T` : í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ ë§Œë“¤ê¸°
- `ctrl` + `alt` +`V` : í˜„ì¬ ë¦¬í„´ê°’ì„ ë‹´ì„ ë³€ìˆ˜ë§Œë“¤ê¸°
<br></br>
<br></br>


# 1.ìš”êµ¬ì‚¬í•­ <a name= "requirement"></a>
> íšŒì›ê´€ë¦¬ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ì–´ë³´ì 

### ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­
 - íšŒì› ì €ì¥
 - íšŒì› ëª©ë¡ ì¡°íšŒ

### íšŒì› ì •ë³´ 
 ì´ë¦„ : `username`
 ë‚˜ì´ : `age`


## ì‹¤ìŠµ 
 > ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­ì„ ë„ë©”ì¸ì— ë§Œë“¤ì–´ ì¤€ë‹¤. 

### Member.java
- íšŒì› ê°ì²´
```java
@Getter
@Setter
@NoArgsConstructor
public class Member {
    private  Long id;
    private String username;
    private int age;


    public Member(String username, int age) {
        this.username = username;
        this.age = age;
    }
}
```

### MemberRepository.java
> ë‹¨ ë™ì‹œì„±ì´ ê³ ë ¤ë˜ì§€ ì•ŠëŠ” ì‹¤ìŠµì´ë‹¤.
 - ì‹±ê¸€í†¤ìœ¼ë¡œ ìƒì„±
 - íšŒì›ì €ì¥
 - íšŒì› ëª©ë¡ ì¡°íšŒ
 - íšŒì› ì „ë¶€ ì¡°íšŒ
 - ì „ë¶€ ì‚­ì œ

```java
public class MemberRepository {

    private Map<Long, Member> store = new HashMap<>();
    private static long sequence =0L;

    private static final  MemberRepository instance = new MemberRepository();


    public static MemberRepository getInstance(){
        return  instance;
    }
    private MemberRepository(){
    }

    public Member save(Member member){
        member.setId(++sequence);
        store.put(member.getId(), member);
        return member;
    }

    public  Member findById(Long id){
        return store.get(id);
    }

    public List<Member> findAll(){
        return new ArrayList<>(store.values());
    }

    public void clearStore(){
        store.clear();
    }
}
```

<br></br>
<br></br>

# 2. ì„œë¸”ë¦¿<a name= "servlet"></a>
> ì„œë¸”ë¦¿ì„ ì´ìš©í•˜ì—¬  íšŒì› ê´€ë¦¬ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë§Œë“¤ì–´ ë³´ì
- ë¨¼ì € ì„œë¸”ë¦¿ìœ¼ë¡œ íšŒì›ë“±ë¡ í¼(HTML)ì„ êµ¬í˜„í•´ì•¼ëœë‹¤. 

### MemberFormServlet.java
- íšŒì›ì„ ë“±ë¡í•˜ëŠ” í¼ì´ë‹¤.
- `HttpServlet`ë¥¼ ìƒì†ë°›ëŠ”ë‹¤.
- ì‘ë‹µìœ¼ë¡œ HTMLì½”ë“œë¥¼ ë³´ë‚´ì¤˜ì•¼í•œë‹¤.
```java
@WebServlet( name= "memberFormServlet", urlPatterns = "/servlet/members/new-form")
public class MemberFormServlet extends HttpServlet {

    private MemberRepository memberRepository = MemberRepository.getInstance();

    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        response.setContentType("text/html");
        response.setCharacterEncoding("utf-8");

        PrintWriter w = response.getWriter();
        w.write("<!DOCTYPE html>\n" + 
                //ìƒëµ
                "<form action=\"/servlet/members/save\" method=\"post\">\n" +
                // html ì½”ë“œ ìƒëµ
                "</html>\n");
    }
}
```
- ìë°”ì½”ë“œë¡œ `html`ì½”ë“œë¥¼ ì‘ì„±í•˜ê¸° ì‰½ì§€ì•ŠìŒ.

### MemberSaveServlet.java
- íšŒì›ì„ ì €ì¥í•˜ëŠ” ì„œë¸”ë¦¿
- ìœ„ì— í¼ì—ì„œ ì…ë ¥ëœ íŒŒë¼ë¯¸í„° ìš”ì²­ì •ë³´ë¥¼ ì¡°íšŒí•´ì„œ Member ê°ì²´ë¡œ ë§Œë“ ë‹¤.
- Member ê°ì²´ë¥¼ ì‚¬ìš©í•´ì„œ ê²°ê³¼ í™”ë©´ìš© HTMLì„ ë™ì ìœ¼ë¡œ ë§Œë“¤ì–´ì„œ ì‘ë‹µ
```java
// ì¤‘ë³µì ì¸ ë¶€ë¶„ ìƒëµ
@Override
protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    System.out.println("MemberSaveServlet.service");
    String username = request.getParameter("username");
    int age = Integer.parseInt(request.getParameter("age"));

    Member member = new Member(username, age);
    memberRepository.save(member);

    //ì‘ë‹µ
    response.setContentType("text/html");
    response.setCharacterEncoding("utf-8");
    PrintWriter w = response.getWriter();

    w.write("<html>\n" +
        //ì¤‘ê°„ ìƒëµ
        "<body>\n" +
        "ì„±ê³µ\n" +
        "<ul>\n" +
        " <li>id=" + member.getId() + "</li>\n" +
        " <li>username=" + member.getUsername() + "</li>\n" +
        " <li>age=" + member.getAge() + "</li>\n" 
        //ì´í›„ ìƒëµ
        "</html>");
}
```


### MemberListServlet
- íšŒì› ëª©ë¡ì¡°íšŒ
  - íšŒì› ëª©ë¡ HTMLì„ for ë£¨í”„ë¥¼ í†µí•´ì„œ íšŒì› ìˆ˜ ë§Œí¼ ë™ì ìœ¼ë¡œ ìƒì„±í•˜ê³  ì‘ë‹µí•œë‹¤
```java
@Override
    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException{

        response.setContentType("text/html");
        response.setCharacterEncoding("utf-8");
        List<Member> members=memberRepository.findAll();

        PrintWriter w=response.getWriter();
        //ì¤‘ê°„ ìƒëµ
        for(Member member:members){
        w.write(" <tr>");
        w.write(" <td>"+member.getId()+"</td>");
        w.write(" <td>"+member.getUsername()+"</td>");
        w.write(" <td>"+member.getAge()+"</td>");
        w.write(" </tr>");
        }
        // ìƒëµ
}

```

> ì„œë¸”ë¦¿ ë•ë¶„ì— ë™ì ìœ¼ë¡œ ì›í•˜ëŠ” HTMLì„ ë§ˆìŒê» ë§Œë“¤ ìˆ˜ ìˆë‹¤.  
> ì •ì ì¸ HTML ë¬¸ì„œë¼ë©´ í™”ë©´ì´ ê³„ì† ë‹¬ë¼ì§€ëŠ” íšŒì›ì˜ ì €ì¥ ê²°ê³¼ë¼ë˜ê°€, íšŒì› ëª©ë¡ ê°™ì€ ë™ì ì¸ HTMLì„ ë§Œë“œëŠ” ì¼ì€ ë¶ˆê°€ëŠ¥

> í•˜ì§€ë§Œ, ì•„ì‰½ê²Œë„ ì½”ë“œê°€ ë§¤ìš° ë³µì¡í•˜ê³  ë¹„íš¨ìš¸ì ì´ë‹¤.
> ìë°” ì½”ë“œë¡œ HTMLì„ ë§Œë“¤ì–´ ë‚´ëŠ” ê²ƒ ë³´ë‹¤ HTML ë¬¸ì„œì— `ë™ì ìœ¼ë¡œ ë³€ê²½í•´ì•¼ í•˜ëŠ” ë¶€ë¶„`ë§Œ ìë°” ì½”ë“œë¥¼ ë„£ì„ ìˆ˜ ìˆë‹¤ë©´ ë” í¸ë¦¬í•  ê²ƒì´ë‹¤
> ì´ê²ƒì´ í…œí”Œë¦¿ ì—”ì§€ì´ ë‚˜ì˜¨ ì´ìœ ì´ë‹¤!!

### í…œí”Œë¦¿ ì—”ì§„ 
- `JSP`, `Thymeleaf`, `Freemarker`, `Velocity`ë“±ì´ ìˆë‹¤
- í˜„ì¬ JSPëŠ” ì„±ëŠ¥ê³¼ ê¸°ëŠ¥ì´ ë‹¤ë¥¸ í…œí”Œë¦¿ ì—”ì§„ì— ë¹„í•´ ë–¨ì–´ì ¸, ì˜ˆì‹œë¡œë§Œ ë“¤ì„ ì˜ˆì •.
- ìŠ¤í”„ë§ì€ `Thymeleaf`ì„ ì‚¬ìš©


# 3.JSP<a name= "JSP"></a> 
> JSPë¥¼ ì´ìš©í•˜ì—¬  íšŒì› ê´€ë¦¬ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ë§Œë“¤ì–´ ë³´ì

## JSPë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€
- build.gradle ì— ì¶”ê°€
```groovy
//JSP ì¶”ê°€ ì‹œì‘
implementation 'org.apache.tomcat.embed:tomcat-embed-jasper'
implementation 'javax.servlet:jstl'
//JSP ì¶”ê°€ ë
```
<br></br>

## JSP íŒŒì¼ ì¶”ê°€
- ìƒˆë¡œìš´ ìœ„ì¹˜ì— jspíŒŒì¼ì„ ë§Œë“¤ì–´ ì¤€ë‹¤. `main/webapp/jsp/members/new-form.jsp`
- íšŒì›ë“±ë¡, íšŒì› ì €ì¥, íšŒì›ëª©ë¡ ì¡°íšŒ í˜ì´ì§€ë¥¼ jspíŒŒì¼ë¡œ ë§Œë“ ë‹¤.

> í˜„ì¬ ì¸í…”ë¦¬ì œì´ì—ì„œ JSP í¸ì˜ê¸°ëŠ¥ì€ ì œê³µí•˜ì§€ ì•ŠëŠ”ë‹¤.

### new-form.jsp
 - íšŒì›ë“±ë¡ í˜ì´ì§€
 - ì²« ì¤„ì€ `JSPë¬¸ì„œ`ë¼ëŠ” ëœ»ì´ë‹¤. í™•ì¥ìê°€ jspì¸ê²ƒ ë§ê³ ë„, ê¼­ ê¸°ì…í•´ì¤˜ì•¼í•œë‹¤.

```html
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<html>
<head>
    <title>Title</title>
</head>
<body>
<form action="/jsp/members/save.jsp" method="post">
    username: <input type="text" name="username" />
    age: <input type="text" name="age" />
    <button type="submit">ì „ì†¡</button>
</form>
</body>
</html>

```

### save.jsp
 - íšŒì› ì •ë³´ ì €ì¥ê¸°ëŠ¥ í˜ì´ì§€
 - ê¸°ëŠ¥ì´ ë“¤ì–´ê°€ëŠ” í˜ì´ì§€ë¡œ, ìë°”ì½”ë“œë¥¼ ì‚¬ìš©í•œë‹¤.
   - `<%`  `%>` ì´ ë‘ íƒœê·¸ ì‚¬ì´ì— ìë°” ì½”ë“œë¥¼ ì…ë ¥í•  ìˆ˜ ìˆë‹¤.
   - `<%=`  `%>` ì´ ë‘ íƒœê·¸ ì‚¬ì´ì— ìë°” ì½”ë“œë¥¼ ì¶œë ¥í•  ìˆ˜ ìˆë‹¤. 
 - í•„ìš”í•œ `import` ë¬¸ë„ `<%@ page`  `%>` ì‚¬ì´ì— ì…ë ¥ í•´ì¤˜ì•¼ í•œë‹¤.
```html
<%@ page import="hello.servlet.domain.member.MemberRepository" %>
<%@ page import="hello.servlet.domain.member.Member" %>
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%
// ë¬¸ë²•ìƒ ìë™  request, response ì‚¬ìš© ê°€ëŠ¥
MemberRepository memberRepository = MemberRepository.getInstance();
System.out.println("save.jsp");
String username = request.getParameter("username");
int age = Integer.parseInt(request.getParameter("age"));
Member member = new Member(username, age);
System.out.println("member = " + member);
memberRepository.save(member);
%>
<html>
<head>
    <meta charset="UTF-8">
</head>
<body>
ì„±ê³µ
<ul>
    <li>id=<%=member.getId()%></li>
    <li>username=<%=member.getUsername()%></li>
    <li>age=<%=member.getAge()%></li>
</ul>
<a href="/index.html">ë©”ì¸</a>
</body>
</html>
```

> íšŒì› ëª©ë¡ì¡°íšŒ.jsp íŒŒì¼ì€ ìƒëµí•œë‹¤.

## ì„œë¸”ë¦¿ê³¼ JSPì˜ í•œê³„
 - ì„œë¸”ë¦¿ì˜ ê²½ìš°ëŠ” `HTML`ì„ ë§Œë“œëŠ” ì‘ì—…ì´ ìë°”ì½”ë“œë¡œ í•˜ê¸°ë•Œë¬¸ì—, ì§€ì €ë¶„í•˜ê³  ì˜¤ë¥˜ì˜ ìœ„í—˜ì´ ìˆë‹¤.
 - JSPì˜ ê²½ìš°ëŠ” `HTML`ì˜ ì‘ì—…ì„ ê¹”ë”í•˜ê²Œ ê°€ì ¸ê°€ê³ (ì˜¤ë¥˜ì˜ ìœ„í—˜ë„ ì ì–´ì§), ë™ì ìœ¼ë¡œ ë³€ê²½ì´ í•„ìš”í•œ ë¶€ë¶„ë§Œ ìë°”ì½”ë“œë¥¼ ì ìš©í•  ìˆ˜ ìˆì§€ë§Œ, 
   - JSP íŒŒì¼ì´ ë„ˆë¬´ ë§ì€ ì¼ì„ í•œë‹¤.
   - JSP íŒŒì¼ ì•ˆì—ëŠ”  `html`ì€ ë¬¼ë¡ ì´ê³  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ìˆ˜í–‰í•˜ëŠ” `JAVA ì½”ë“œ` , ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ëŠ” `ë¦¬í¬ì§€í† ë¦¬`ë“±ë“± ëª¨ë‘ ë“¤ì–´ê°€ìˆë‹¤.
   - ì¦‰, ìœ ì§€ë³´ìˆ˜ê°€ ì§€ì˜¥ì´ ëœë‹¤.

> ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ, ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ ë”°ë¡œ, HTML(View)í™”ë©´ë”°ë¡œ ë¶„ë¦¬í•´ì•¼ í•¨ì„ ëŠê¼ˆë‹¤.  
> ê·¸ë˜ì„œ MVC íŒ¨í„´ì´ ë“±ì¥í•œë‹¤.  

<br></br>
<br></br>

# MVC íŒ¨í„´ 
## ê°œìš”<a neame="summary"></a>
### ë„ˆë¬´ ë§ì€ ì—­í• 
- í•˜ë‚˜ì˜ ì„œë¸”ë¦¿ì´ë‚˜ JSP ë§Œìœ¼ë¡œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ë·° ë Œë”ë§ê¹Œì§€ ëª¨ë‘ ì²˜ë¦¬í•˜ê²Œ ë˜ë©´,
  - ë„ˆë¬´ ë§ì€ ì—­í• ì„ í•˜ê²Œ ë˜ê³ , ê²°ê³¼ì ìœ¼ë¡œ ìœ ì§€ ë³´ìˆ˜ê°€ ì–´ë ¤ì›Œì§„ë‹¤.
  - UI ìˆ˜ì •í•  ë•Œë„ ìˆ˜ì •í•´ì•¼ ë˜ê³ , ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ìˆ˜ì •í•  ë•Œë„ ìˆ˜ì •í•´ì•¼ ë¨.(ìˆ˜ì²œ ì¤„ ì‚¬ì´ì—ì„œ 1ì¤„ ê³ ì¹˜ëŠ” ê²ƒë„ ì¼ì„)

### ë³€ê²½ì˜ ë¼ì´í”„ ì‚¬ì´í´
- ë‘˜ ì‚¬ì´ì— `ë³€ê²½ì˜ ë¼ì´í”„ ì‚¬ì´í´`ì´ ë‹¤ë¥´ë‹¤ëŠ” ì 
  - UI ë³€ê²½ê³¼ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì˜ ë³€ê²½ì´ ê°™ì´ ì¼ì–´ë‚˜ëŠ” ê²½ìš°ëŠ” **ë³€í™”ê°€ ë§¤ìš° í° ê²½ìš°**
  - ë³´í†µì€ UI ë³€ê²½ë§Œ í•„ìš”í•˜ê±°ë‚˜, ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë³€ê²½ë§Œ í•„ìš”í•œ ê²½ìš°ê°€ ë§ë‹¤.

### ê¸°ëŠ¥ íŠ¹í™”
- JSP ê°™ì€ ë·° í…œí”Œë¦¿ì€ **í™”ë©´ì„ ë Œë”ë§ í•˜ëŠ”ë° ìµœì í™”** ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ì´ ë¶€ë¶„ì˜ ì—…ë¬´ë§Œ ë‹´ë‹¹í•˜ëŠ” ê²ƒì´ ê°€ì¥ íš¨ê³¼ì 
  - ë·° í…œí”Œë¦¿ -> í™”ë©´ ë Œë”ë§

<br></br>

### Model View Controller

#### Controller
 - HTTP ìš”ì²­ì„ ë°›ì•„ì„œ íŒŒë¼ë¯¸í„°ë¥¼ ê²€ì¦í•˜ê³ , ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì‹¤í–‰í•œë‹¤. 
 - ê·¸ë¦¬ê³  ë·°ì— ì „ë‹¬í•  ê²°ê³¼ ë°ì´í„°ë¥¼ ì¡°íšŒí•´ì„œ ëª¨ë¸ì— ë‹´ëŠ”ë‹¤
#### Model
 - ë·°ì— ì¶œë ¥í•  ë°ì´í„°ë¥¼ ë‹´ì•„ë‘”ë‹¤
 - ë·°ê°€ í•„ìš”í•œ ë°ì´í„°ë¥¼ ëª¨ë‘ ëª¨ë¸ì— ë‹´ì•„ì„œ ì „ë‹¬í•´ì£¼ëŠ” ë•ë¶„ì— ë·°ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ë‚˜ ë°ì´í„° ì ‘ê·¼ì„ ëª°ë¼ë„ ë˜ê³ , í™”ë©´ì„ ë Œë”ë§ í•˜ëŠ” ì¼ì— ì§‘ì¤‘í•  ìˆ˜ ìˆë‹¤.
#### View
 - ëª¨ë¸ì— ë‹´ê²¨ìˆëŠ” ë°ì´í„°ë¥¼ ì‚¬ìš©í•´ì„œ í™”ë©´ì„ ê·¸ë¦¬ëŠ” ì¼ì— ì§‘ì¤‘í•œë‹¤
 - ì—¬ê¸°ì„œëŠ” HTMLì„ ìƒì„±í•˜ëŠ” ë¶€ë¶„


<p align="center"><img src="https://user-images.githubusercontent.com/104331549/179229525-f24713b9-418c-4481-8561-99125a9e4085.png" width="80%"></p>

- ì´ ë¡œì§ ë˜í•œ, controllerì˜ í•˜ëŠ” ì¼ì´ ë§ì•„, **ì„œë¹„ìŠ¤ê³„ì¸µ**ìœ¼ë¡œ í•œë²ˆ ë” ë‚˜ëˆ ì¤€ë‹¤. 
<p align="center"><img src="https://user-images.githubusercontent.com/104331549/179229675-419487b7-79cb-4450-a6c8-da0ee5f8addd.png" width="80%"></p>

<br></br>
<br></br>

## ì ìš©<a neame="Application"></a>
> ì„œë¸”ë¦¿ -> ì»¨íŠ¸ë¡¤ëŸ¬   
> JSP -> ë·°
> MVC íŒ¨í„´ìœ¼ë¡œ ì ìš©í•˜ë ¤ëŠ”ë°, ê·¸ëŸ¼ Modelì€? ë¬´ì—‡ì¼ê¹Œ?

- Modelì€ HttpServletRequest ê°ì²´ë¥¼ ì‚¬ìš© 
  - `request`ëŠ” ë‚´ë¶€ì— ë°ì´í„° ì €ì¥ì†Œë¥¼ ê°€ì§€ê³  ìˆëŠ”ë°
  - `request.setAttribute()` , `request.getAttribute()` ë¥¼ ì‚¬ìš©í•˜ë©´ ë°ì´í„°ë¥¼ ë³´ê´€í•˜ê³ , ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.

<br></br>

## íšŒì› ë“±ë¡ ì ìš©í•˜ê¸° 
###  ì»¨íŠ¸ë¡¤ëŸ¬(Servlet)
- `dispatcher.forward()` : ë‹¤ë¥¸ ì„œë¸”ë¦¿ì´ë‚˜ JSPë¡œ ì´ë™í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥
    - ì„œë²„ ë‚´ë¶€ì—ì„œ ë‹¤ì‹œ í˜¸ì¶œì´ ë°œìƒ 
- ì—¬ê¸°ì„œ `path`í´ë”ì˜ ìœ„ì¹˜ê°€ `/WEB-INF`ë¡œ ì‹œì‘í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆëŠ”ë°,
   - WASì—ì„œ ì •í•´ì§„ ë£°ë¡œ, ì´ ê²½ë¡œ ì•ˆì— ìˆëŠ” ìì›(jspê°™ì€)ë“¤ì€ ì™¸ë¶€ì—ì„œ í˜¸ì¶œí•´ë„, í˜¸ì¶œë˜ì§€ ì•ŠëŠ”ë‹¤.
   - ì¦‰, í˜¸ì¶œì„ í•˜ë ¤ë©´, `Controller`ë¥¼ í†µí•´ í˜¸ì¶œë˜ì•¼ëœë‹¤.
```java
@WebServlet(name = "mvcMemberFormServlet", urlPatterns = "/servlet-mvc/members/new-form")
public class MvcMemberFormServlet extends HelloServlet {
    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String viewPath = "/WEB-INF/views/new-form.jsp";
        RequestDispatcher dispatcher =request.getRequestDispatcher(viewPath);
        dispatcher.forward(request, response);
    }
}
```
<br></br>

### Forward ë‘ Redirectì˜ ì°¨ì´ 
 - Redirect : ì‹¤ì œ í´ë¼ì´ì–¸íŠ¸ì— ì‘ë‹µì´ ë‚˜ê°”ë‹¤ê°€, ë‹¤ì‹œ redirect ê²½ë¡œë¡œ ë‹¤ì‹œ ìš”ì²­í•˜ê²Œ ëœë‹¤. 
 - Forward : ì„œë²„ ë‚´ë¶€ì—ì„œ ì‘ë‹µì„ ë‚´ë¶€ì—ì„œ ë‹¤ì‹œ ìš”ì²­í•˜ì—¬ ì²˜ë¦¬í•˜ê²Œ ëœë‹¤.

#### ì˜ˆì‹œ
> ê³ ê°(í´ë¼ì´ì–¸íŠ¸)ê³¼ ê³ ê°ì„¼í„°(URL), ìƒë‹´ì‚¬(ì„œë²„)ë¥¼ ì˜ˆì‹œë¡œ ë“¤ì–´ë³´ì
 - Redirect 
   - ê³ ê°ì´ ê³ ê°ì„¼í„°ë¡œ 123ë²ˆìœ¼ë¡œ ì „í™”ë¥¼ ê±´ë‹¤. 
   - ìƒë‹´ì›ì€ ê³ ê°ì—ê²Œ ë‹¤ìŒê³¼ ê°™ì´ ì´ì•¼ê¸°í•œë‹¤. "ê³ ê°ë‹˜ í•´ë‹¹ë¬¸ì˜ì‚¬í•­ì€ 124ë²ˆìœ¼ë¡œ ë¬¸ì˜í•´ ì£¼ì‹œê² ì–´ìš”?"
   - ê³ ê°ì€ ë‹¤ì‹œ 124ë²ˆìœ¼ë¡œ ë¬¸ì˜í•´ì„œ ì¼ì„ ì²˜ë¦¬í•œë‹¤.
 - Forward 
   - ê³ ê°ì´ ê³ ê°ì„¼í„°ë¡œ 123ë²ˆìœ¼ë¡œ ì „í™”ë¥¼ ê±´ë‹¤.
   - ìƒë‹´ì›ì€ í•´ë‹¹ ë¬¸ì˜ì‚¬í•­ì— ëŒ€í•´ ì•Œì§€ ëª»í•´, ì˜†ì— ë‹¤ë¥¸ ìƒë‹´ì›ì—ê²Œ í•´ë‹¹ ë¬¸ì˜ì‚¬í•­ì— ë‹µì„ ì–»ëŠ”ë‹¤.
   - ìƒë‹´ì›ì€ ê³ ê°ì—ê²Œ ë¬¸ì˜ì‚¬í•­ì„ ì²˜ë¦¬í•´ ì¤€ë‹¤. 

### Forward íë¦„

<p align="center"><img src="https://user-images.githubusercontent.com/104331549/179343209-dec54187-489c-4822-8f67-8586cd8dce78.png" width="80%"></p>

### Redirect íë¦„

<p align="center"><img src="https://user-images.githubusercontent.com/104331549/179343331-584ba16a-f937-44ea-ae89-0cc036200aee.png" width="80%"></p>


### ì°¨ì´ì  
 - URLì˜ ë³€í™” ì—¬ë¶€ 
    - `Redirect`ëŠ” ë³€í•œë‹¤.
    - `Forward`ëŠ” ë³€í•˜ì§€ ì•ŠëŠ”ë‹¤.
 - ê°ì²´ì˜ ì¬ì‚¬ìš© ì—¬ë¶€
   - `Redirect`ëŠ” ì¬ì‚¬ìš©ì„ í•  ìˆ˜ ì—†ë‹¤.
   - `Forward`ëŠ” ì¬ì‚¬ìš© í•  ìˆ˜ ìˆë‹¤.
 - ì‚¬ìš©ì²˜ 
   - `Redirect`ëŠ” ì„¸ì…˜,DBì— ë³€í™”ê°€ ìƒê¸°ëŠ” ìš”ì²­ì¸ ê²½ìš°ë¡œ, ì˜ˆë¡œ ë¡œê·¸ì¸, íšŒì›ê°€ì…, ê¸€ì“°ê¸° ë“±
   - `Forward`ëŠ” ì‹œìŠ¤í…œì— ë³€í™”ê°€ ìƒê¸°ì§€ ì•ŠëŠ” ë‹¨ìˆœ ì¡°íšŒ ìš”ì²­ì¸ ê²½ìš°ë¡œ, ì˜ˆë¡œ ê¸€ ëª©ë¡ ë³´ê¸°, ê²€ìƒ‰ ë“±

> ê°•ì˜ì—ì„œ ì‹¤ìŠµí•´ë³´ëŠ” ë‚´ìš©ì€ forwardì´ê¸°ì—, íšŒì›ê°€ì… ì°½ì—ì„œ ìƒˆë¡œê³ ì¹¨í•˜ë©´, íšŒì›ê°€ì…ìš”ì²­ì´ ë˜ ì¼ì–´ë‚˜ëŠ” ìƒí™©ì´ ë²„ë ¤ì§„ë‹¤.
<br></br>


### ë·°(jsp)

```html
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<html>
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<!-- ìƒëŒ€ê²½ë¡œ ì‚¬ìš©, [í˜„ì¬ URLì´ ì†í•œ ê³„ì¸µ ê²½ë¡œ + /save] -->
<form action="save" method="post">
    username: <input type="text" name="username" />
    age: <input type="text" name="age" />
    <button type="submit">ì „ì†¡</button>
</form>
</body>
</html>
```

> actionì— ì…ë ¥í•  ë–„ urlì˜ ê²½ë¡œë¥¼ ì…ë ¥í• ë•Œ, ë§¨ì²˜ìŒì— `/`ë¡œ ì‹œì‘í•˜ë©´, ì ˆëŒ€ê²½ë¡œì´ë©°, 
> `/`ì—†ì´ ë°”ë¡œ url ì •ë³´ê°€ ë‚˜ì˜¤ë©´ ìƒëŒ€ê²½ë¡œì´ë‹¤.

 - í˜„ì¬ ê²½ë¡œ: `/servlet-mvc/members/`_íŒŒì¼ëª…ì€ í¬í•¨ë˜ì§€ ì•ŠìŒ
 - ìƒëŒ€ ê²½ë¡œ ê²°ê³¼ : `/servlet-mvc/members/save`

## íšŒì› ì €ì¥ ì ìš©í•˜ê¸°
 - HTML Formì— ë°ì´í„°ë¥¼ ì…ë ¥í•˜ê³  ì „ì†¡ì„ ëˆ„ë¥´ë©´ ì €ì¥ ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤
###  ì»¨íŠ¸ë¡¤ëŸ¬(Servlet)
- HttpServletRequestë¥¼ Modelë¡œ ì‚¬ìš©í•œë‹¤.
  - requestê°€ ì œê³µí•˜ëŠ” `request.setAttribute()`ë¥¼ ì‚¬ìš©í•˜ë©´ request ê°ì²´ì— ë°ì´í„°ë¥¼ ë³´ê´€í•´ì„œ ë·°ì— ì „ë‹¬í•  ìˆ˜ ìˆë‹¤
  - ê·¸ë¦¬ê³  ë·°ëŠ” `request.getAttribute()`ë¥¼ ì‚¬ìš©í•´ì„œ ë°ì´í„°ë¥¼ êº¼ë‚´ë©´ ëœë‹¤
```java
@Override
protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    String username = request.getParameter("username");
    int age = Integer.parseInt(request.getParameter("age"));

    Member member = new Member(username, age);
    System.out.println("member = " + member);

    memberRepository.save(member);

    //Modelì— ë°ì´í„°ë¥¼ ë³´ê´€í•œë‹¤.
    request.setAttribute("member", member);

    String viewPath = "/WEB-INF/views/save-result.jsp";
    RequestDispatcher dispatcher = request.getRequestDispatcher(viewPath);
    dispatcher.forward(request, response);
}
```
### ë·°
```html
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<!-- <%@ page import="hello.servlet.domain.member.Member" %> -->
<html>
<head>
 <meta charset="UTF-8">
</head>
<body>
ì„±ê³µ
<ul>
 <!-- <li><%=((Member)request.getAttribute("member") ).getId()%></li> -->
 <li>id=${member.id}</li>
 <li>username=${member.username}</li>
 <li>age=${member.age}</li>
</ul>
<a href="/index.html">ë©”ì¸</a>
</body>
</html>

```

> íšŒì› ëª©ë¡ì¡°íšŒ ê¸°ëŠ¥ì€ ìƒëµí•œë‹¤.

<br></br>
<br></br>

## í•œê³„<a neame="Limit"></a>
 - MVC íŒ¨í„´ì„ ì ìš©í•œ ë•ë¶„ì— **ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ì—­í• **ê³¼ **ë·°ë¥¼ ë Œë”ë§ í•˜ëŠ” ì—­í• **ì„ ëª…í™•í•˜ê²Œ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤.
 - ì—¬ê¸°ì„œ ë·°ëŠ” ì—­í• ì— ì¶©ì‹¤í•œ ë•ë¶„ì—, ì½”ë“œê°€ ê¹”ë”í•˜ê³  ì§ê´€ì ì´ë‹¤.
 - ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ì•„ì§ ì¤‘ë³µì´ ë§ê³ , í•„ìš”í•˜ì§€ ì•ŠëŠ” ì½”ë“œë“¤ë„ ë§ì´ ë³´ì¸ë‹¤. 

### MVC ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ë‹¨ì  
 - **í¬ì›Œë“œ(Foward) ì¤‘ë³µ**
   - Viewë¡œ ì´ë™í•˜ëŠ” ì½”ë“œê°€ í•­ìƒ ì¤‘ë³µ í˜¸ì¶œ
 - **ViewPathì— ì¤‘ë³µ**
   - prefix: `/WEB-INF/views/`
   - suffix: `.jsp`
 - **ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ì½”ë“œ**
   -`HttpServletRequest request` `HttpServletResponse response`
   - íŠ¹íˆ responseëŠ” í˜„ì¬ ì½”ë“œì—ì„œ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤. 

### ê²°ë¡ 
 - ìœ„ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ, ê³µí†µ ê¸°ëŠ¥ì„ ë©”ì„œë“œë¡œ ë½‘ìœ¼ë©´ ë  ê²ƒ ê°™ì§€ë§Œ, ê²°ê³¼ì ìœ¼ë¡œ í•´ë‹¹ ë©”ì„œë“œë¥¼ í•­ìƒ í˜¸ì¶œí•´ì•¼ëœë‹¤. 
   - ì‹¤ìˆ˜ë¡œ í˜¸ì¶œí•˜ì§€ ì•Šìœ¼ë©´ ë¬¸ì œê°€ ë  ê²ƒì´ë‹¤.(í˜¸ì¶œ ìì²´ë„ ì¤‘ë³µ) 
 - **ì¦‰, ê³µí†µ ì²˜ë¦¬ê°€ ì–´ë µë‹¤ëŠ” ë¬¸ì œê°€ ìˆë‹¤.**
> ì´ëŸ¬í•œ ë¬¸ì œëŠ” í˜¸ì¶œë˜ê¸° ì „ ë¶€í„° ë¨¼ì € ê³µí†µ ê¸°ëŠ¥ì„ ì²˜ë¦¬í•´ì•¼ë˜ëŠ” ê²ƒì´ë‹¤.  
>  í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬(Front Controller) íŒ¨í„´ì„ ë„ì…í•˜ë©´ ì´ëŸ° ë¬¸ì œë¥¼ ê¹”ë”í•˜ê²Œ í•´ê²°í•  ìˆ˜ ìˆë‹¤.  
> (ì…êµ¬ë¥¼ í•˜ë‚˜ë¡œ!)  


<br></br>
<br></br>

## ëŠë‚€ì  ğŸ˜Œ

### ì°¸ê³  ë§í¬
 - [Redirectì™€ Forwardì°¨ì´](https://doublesprogramming.tistory.com/63)
