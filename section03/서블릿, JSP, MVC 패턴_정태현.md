# 03_서블릿, JSP, MVC 패턴

## 서블릿으로 회원 관리 웹 애플리케션 만들기

### 서블릿 만을 이용한 개발의 한계와 해결 방안

- 동적으로 원하는 HTML을 만들 수 있었지만, 자바 코드로 HTML을 만드는 과정을 복잡하고 비효율적이다.
- 자바 코드로 HTML을 만들어 내는 것보다 차라리 HTML 문서에 동적으로 데이터를 변경해주는 것이 더 편리할 것이다.
- 이 문제를 해결하기 위해 템플릿 엔진을 이용하면 HTML 문서에 필요한 곳만 코드를 적용해서 동적으로 변경할 수 있다.
  - 템플릿 엔진의 ex) JSP, Thymeleaf, Freemarker, Velocity 등

## JSP로 회원 관리 웹 애플리케이션 만들기

### 서블릿과 JSP의 한계

- 서블릿으로 개발할 때는 뷰(View) 화면을 위한 HTML을 만드는 작업이 자바 코드에 섞여서 지저분하고 복잡했다.
- JSP를 사용한 덕분에 뷰를 생성하는 HTML 작업을 깔끔하게 처리하고, 동적으로 변경이 필요한 부분만 자바 코드를 적용했다.
- 하지만 JSP를 도입해도 다음과 같은 문제점이 남아있다.
  - 하나의 JSP 파일 안에 비즈니스 로직과 결과를 HTML로 보여주기 위한 뷰 영역이 공존한다.
  - 이 부분이 JSP 파일이 너무 많은 역할을 담당하게 만들고, 유지보수를 더 힘들게 만든다.

## MVC 패턴

### MVC 패턴의 등장 배경

- 서블릿과 JSP를 이용한 개발에서는 하나의 파일이 **너무 많은 역할을 담당했다.**
- UI를 수정하는 것과 비즈니스 로직을 수정하는 부분은 변경의 라이프 사이클이 다르지만 기존 방식은 하나의 파일안에서 해결하려고 했기 때문에 **유지보수하기 좋지 않았다.**
- 뷰 템플릿 엔진은 화면을 렌더링 하는데 최적화 되어 있기 때문에 이 **업무만 담당하는 것이 가장 효과적일 것이다.**

### MVC(Model View Controller)

- MVC 패턴은 하나의 서블릿이나, JSP로 처리하는 것을 Model, View, Controller라는 영역으로 서로의 역할을 나누어 개발하는 패턴을 말한다.
- Controller(컨트롤러)
  - HTTP 요청을 받아서 파라미터를 검증한다.
  - 비즈니스 로직을 실행하고, 뷰에 전달할 결과 데이터를 조회해서 모델에 담는다.
- Model(모델)
  - 뷰에 출력할 데이터를 담아둔다.
- View(뷰)
  - 모델에 담겨있는 데이터를 사용해서 화면을 그린다.

- Service(서비스)
  - 컨트롤러에 비즈니스 로직을 둘 수 도 있지만, 이렇게 되면 컨트롤러가 너무 많은 역할을 담당한다.
  - 그래서 일반적으로 비즈니스 로직은 서비스라는 계층을 별도로 만들어서 처리한다.

### MVC 패턴의 적용

- Controller : 서블릿
- View : JSP
- Model : HttpServletRequest의 임시 저장소

### MVC 패턴의 한계

- MVC 패턴을 적용으로 컨트롤러의 역할과 뷰를 렌더링하는 역할을 명확하게 구분할 수 있었지만, 여전히 중복되는 코드와 필요하지 않는 코드들이 남아있다.

- MVC 패턴의 컨트롤러가 가진 단점

  1. View로 이동하는 코드가 항상 중복 호출되어야 한다.

     - ```java
       RequestDispatcher dispatcher = request.getRequestDispatcher(viewPath);
       dispatcher.forward(request, response);
       ```

  2. viewPath 중복

     - prefix: `/WEB-INF/views/` 
     - suffix: `.jsp` 
     - 만약 JSP가 아닌 Thymeleaf 같은 다른 뷰 템플릿 엔진으로 변경한다면 전체 코드를 다 변경해야 한다.

  3. 사용하지 않는 코드가 존재한다.

     - ```java
       HttpServletRequest request, HttpServletResponse response
       ```

  4. 공통 기능 처리가 어렵다.
